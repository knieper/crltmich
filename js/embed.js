(function(a){a=a||window;if(!a.ZAP||!a.ZAP._embedLoaded){var e=document.querySelector("body"),l=document.querySelector("head"),f,g,d=document.getElementById("zaptionEmbed");d||(d=document.getElementsByTagName("script"),d=d[d.length-1]);var k="file:"===window.location.protocol?"https://":"//";if(d){var m=document.createElement("a");m.href=d.src;g=k+m.host+"/";g.match(/cloudfront\.net/)&&(g=k+"www.zaption.com/")}else g=k+"www.zaption.com/";var n=function(b){27===b.keyCode&&h()},h=function(){window.removeEventListener("keydown",
n);e.removeChild(f);e.className=e.className.replace(/\s?zaption-frame-background\s?/g,"");f=null;return!1},p=function(b){f&&h();f=document.createElement("iframe");f.setAttribute("allowfullscreen",!0);f.className="zaption-frame";f.src=g+"tours/"+b+"/embed";e.className=e.className?e.className+" zaption-frame-background":"zaption-frame-background";e.appendChild(f);window.addEventListener("keydown",n)},q=function(){var b=[];Array.prototype.slice.call(document.querySelectorAll(".zaption-thumbnail"),0).forEach(function(c){if(!c.firstElementChild||
"zaption-thumbnail-cut"!==c.firstElementChild.className)if(c.attributes["data-id"])b.push(c.attributes["data-id"].value);else if(c.attributes["data-random-ids"]){var a=c.attributes["data-random-ids"].value.split(","),a=a[Math.floor(Math.random()*a.length)];b.push(a);c.setAttribute("data-id",a)}});return b},d=function(){var b=q();if(0<b.length){var c=document.createElement("script");c.src=g+"embed/thumbnails.js?tourIds="+b.join(",")+"&cachebust="+Date.now();c.type="text/javascript";e.appendChild(c)}};
d();(function(){var b=document.createElement("link");b.setAttribute("href",g+"css/embed.css");b.setAttribute("media","all");b.setAttribute("type","text/css");b.setAttribute("rel","stylesheet");l.appendChild(b)})();a.addEventListener("message",function(b){if("closeZaptionPlayer"===b.data)return h()});a.ZAP=a.ZAP||{};a.ZAP.refindBody=function(){e=document.querySelector("body");l=document.querySelector("head")};a.ZAP.findNewPlaceholders=d;a.ZAP.loadThumbs=function(b){b.forEach(function(c){"file:"===
window.location.protocol&&"//"===c.src.substr(0,2)&&(c.src="https:"+c.src);var b=document.querySelector('.zaption-thumbnail[data-id="'+c.id+'"]');if(!b.firstElementChild||"zaption-thumbnail-cut"!==b.firstElementChild.className){var a=document.createElement("img");b.className.match(/\bzaption-large-thumbnail\b/)?a.src=c.src.replace("/default.jpg","/0.jpg").replace("_100.jpg","_640.jpg").replace("_100x75.jpg","_640x480.jpg"):a.src=c.src;"https:"===window.location.protocol&&/vimeo.*\.com\//.test(a.src)&&
!/(https)?\/\/i\./.test(a.src)&&(a.src=a.src.replace("//","//secure-"));a.className="zaption-thumbnail-image";var d=document.createElement("div");d.appendChild(a);d.className="zaption-thumbnail-wrapper";a=document.createElement("div");a.appendChild(d);a.className="zaption-thumbnail-cut";d=document.createElement("div");a.appendChild(d);d.className="zaption-thumbnail-play";b.appendChild(a);b.title=c.title;Array.prototype.forEach.call(document.querySelectorAll('[data-id="'+c.id+'"]'),function(a){a.addEventListener("click",
function(){p(c.id)},!1)})}})};a.ZAP.closePlayer=h;a.ZAP.openPlayer=p;a.ZAP._embedLoaded=!0}})(window);